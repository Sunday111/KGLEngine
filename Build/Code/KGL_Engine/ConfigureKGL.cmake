FUNCTION(ConfigureKGL modules)
    set(USE_KGL_CORE 0)
    set(USE_KGL_GRAPHICS 0)
    set_property(GLOBAL PROPERTY USE_FOLDERS ON)

    FOREACH(module ${modules})
        if(module EQUAL KGL_CORE)
            set(USE_KGL_CORE 1)
        ELSEIF(module EQUAL KGL_GRAPHICS)
            set(USE_KGL_GRAPHICS 1)
        endif()
    ENDFOREACH()

    message(STATUS "Configure KGL engine dependencies")
    IF(DEFINED USE_KGL_GRAPHICS)
        message(STATUS "Configure glew")
        include(${TOP}/ThirdParty/glew.cmake)
        add_subdirectory(${GLEW_DIR}/build/cmake ${GLEW_BINARY_DIR} EXCLUDE_FROM_ALL)
        set_target_properties (glew_s PROPERTIES FOLDER "Third Party")
    ENDIF()
    
    IF(DEFINED USE_KGL_CORE)
        message(STATUS "Configure KGL_Core")
        add_subdirectory(${TOP}/Build/Code/KGL_Engine/KGL_Core ${CMAKE_BINARY_DIR}/Deps/KGL_Engine/KGL_Core)
    ENDIF()
    
    IF(DEFINED USE_KGL_GRAPHICS)
        message(STATUS "Configure KGL_Graphics")
        add_subdirectory(${TOP}/Build/Code/KGL_Engine/KGL_Graphics ${CMAKE_BINARY_DIR}/Deps/KGL_Engine/KGL_Graphics)
    ENDIF()
endfunction()